"""
ìŠ¤í† ë¦¬í˜• ì–´ë“œë²¤ì²˜ ê²Œì„
"""

def show_scene(scene_id, scenes, inventory):
    scene = scenes[scene_id]
    print("\n" + "="*40)
    print(scene["text"])
    if "item" in scene:
        inventory.append(scene["item"])
        print(f"ğŸ {scene['item']} ì„(ë¥¼) ì–»ì—ˆë‹¤!")

    if not scene["choices"]:
        print("ê²Œì„ ì¢…ë£Œ!")
        return None

    for i, (desc, _) in enumerate(scene["choices"], 1):
        print(f"{i}. {desc}")

    while True:
        try:
            choice = int(input("ì„ íƒ: ")) - 1
            if 0 <= choice < len(scene["choices"]):
                return scene["choices"][choice][1]
        except ValueError:
            pass
        print("â— ì˜¬ë°”ë¥¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.")


def main():
    inventory = []
    scenes = {
        "start": {
            "text": "ë‹¹ì‹ ì€ ì‘ì€ ë§ˆì„ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ëª¨í—˜ì„ ë– ë‚  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë””ë¡œ ê°€ì‹œê² ìŠµë‹ˆê¹Œ?",
            "choices": [
                ("ìˆ²ìœ¼ë¡œ ê°„ë‹¤", "forest"),
                ("ë™êµ´ë¡œ ê°„ë‹¤", "cave"),
                ("íƒ‘ìœ¼ë¡œ ê°„ë‹¤", "tower")
            ]
        },
        "forest": {
            "text": "ìˆ²ì†ì—ì„œ ë¹›ë‚˜ëŠ” ë³´ë¬¼ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤!",
            "item": "ìˆ²ì˜ ë³´ë¬¼",
            "choices": [
                ("ë™êµ´ë¡œ ì´ë™", "cave"),
                ("íƒ‘ìœ¼ë¡œ ì´ë™", "tower")
            ]
        },
        "cave": {
            "text": "ë™êµ´ ì†ì—ì„œ ì‹ ë¹„í•œ ë³´ì„ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤!",
            "item": "ë™êµ´ì˜ ë³´ì„",
            "choices": [
                ("íƒ‘ìœ¼ë¡œ ì´ë™", "tower")
            ]
        },
        "tower": {
            "text": "ë†’ì€ íƒ‘ ê¼­ëŒ€ê¸°ì—ì„œ ëª¨í—˜ì˜ ë§ˆì§€ë§‰ ê²°ì •ì„ ë§ì´í•©ë‹ˆë‹¤...",
            "choices": []
        }
    }

    # ìŠ¤í† ë¦¬ ì§„í–‰
    current = "start"
    while current:
        current = show_scene(current, scenes, inventory)

    # ì—”ë”© íŒì •
    print("\n" + "="*40)
    if len(inventory) == 2:
        print("ğŸ‰ ëª¨ë“  ë³´ë¬¼ì„ ëª¨ìœ¼ê³  ë§ˆì„ë¡œ ëŒì•„ê°”ìŠµë‹ˆë‹¤. í•´í”¼ ì—”ë”©!")
    elif len(inventory) == 1:
        print("ğŸ™‚ ì¼ë¶€ ë³´ë¬¼ë§Œ ê°€ì§€ê³  ëŒì•„ê°”ìŠµë‹ˆë‹¤. í‰ë²”í•œ ì—”ë”©.")
    else:
        print("ğŸ’€ ë¹ˆì†ìœ¼ë¡œ ëŒì•„ê°”ìŠµë‹ˆë‹¤. ë°°ë“œ ì—”ë”©...")


if __name__ == "__main__":
    main()
